# Signate Digital Signage Platform - Environment Configuration
# Production-ready configuration for Docker deployment

# ==============================================================================
# CORE APPLICATION SETTINGS
# ==============================================================================

# Environment Mode
ENVIRONMENT=development
DEBUG=true

# Application Settings
APP_NAME=Signate Digital Signage
APP_VERSION=1.0.0
SECRET_KEY=signate-development-secret-key-change-in-production

# Server Configuration
LISTEN_HOST=0.0.0.0
LISTEN_PORT=8000
ALLOWED_HOSTS=localhost,127.0.0.1,signate-server,*.signate.local

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# SQLite (Development)
DATABASE_URL=sqlite:////data/signate.db

# PostgreSQL (Production - commented out for development)
# DATABASE_URL=postgresql://signate:signate_password@postgres:5432/signate_db
# POSTGRES_DB=signate_db
# POSTGRES_USER=signate
# POSTGRES_PASSWORD=signate_password

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================

# Redis Connection
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_MAX_MEMORY=256mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# ==============================================================================
# CELERY CONFIGURATION
# ==============================================================================

# Celery Broker & Result Backend
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# Celery Worker Settings
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json

# ==============================================================================
# MEDIA & STATIC FILES
# ==============================================================================

# File Storage Paths
MEDIA_ROOT=/data/media
STATIC_ROOT=/data/static
STATIC_URL=/static/
MEDIA_URL=/media/

# File Upload Settings
FILE_UPLOAD_MAX_MEMORY_SIZE=104857600  # 100MB
DATA_UPLOAD_MAX_MEMORY_SIZE=104857600  # 100MB

# ==============================================================================
# NETWORK CONFIGURATION
# ==============================================================================

# Network Subnets
FRONTEND_SUBNET=172.20.0.0/16
BACKEND_SUBNET=172.21.0.0/16

# External Ports
NGINX_PORT=8000
SERVER_DEV_PORT=9000

# ==============================================================================
# CONTAINER CONFIGURATION
# ==============================================================================

# Container Names
SERVER_CONTAINER_NAME=signate-server
WEBSOCKET_CONTAINER_NAME=signate-websocket
CELERY_CONTAINER_NAME=signate-celery
REDIS_CONTAINER_NAME=signate-redis
NGINX_CONTAINER_NAME=signate-nginx

# Build Arguments
DEBIAN_VERSION=bookworm
PYTHON_VERSION=3.11
NODE_VERSION=22
NGINX_VERSION=alpine

# ==============================================================================
# GIT INFORMATION (for version tracking)
# ==============================================================================

GIT_HASH=development
GIT_SHORT_HASH=dev
GIT_BRANCH=main
DEVICE_TYPE=server

# ==============================================================================
# HEALTH CHECK CONFIGURATION
# ==============================================================================

# Health Check Intervals (seconds)
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

# Log Levels
LOG_LEVEL=INFO
DJANGO_LOG_LEVEL=INFO
CELERY_LOG_LEVEL=INFO

# Log Format
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ==============================================================================
# SECURITY SETTINGS
# ==============================================================================

# CORS Settings
CORS_ALLOWED_ORIGINS=http://localhost:8000,http://127.0.0.1:8000
CORS_ALLOW_CREDENTIALS=true

# Session Settings
SESSION_COOKIE_SECURE=false  # Set to true in production with HTTPS
CSRF_COOKIE_SECURE=false     # Set to true in production with HTTPS

# ==============================================================================
# DEVELOPMENT SETTINGS
# ==============================================================================

# Development Features
ENABLE_DEBUG_TOOLBAR=true
ENABLE_PROFILING=false

# Hot Reload (for development)
ENABLE_HOT_RELOAD=true
WEBPACK_DEV_SERVER=true