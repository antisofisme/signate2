# Signate SaaS Platform - Environment Configuration Template
# Copy this file to .env and customize for your environment

# ==============================================================================
# ENVIRONMENT SETTINGS
# ==============================================================================

# Application Environment (development, staging, production)
ENVIRONMENT=development
DEBUG=true

# Application Information
APP_NAME=Signate Digital Signage
APP_VERSION=1.0.0
SECRET_KEY=your-secret-key-change-this-in-production

# Server Configuration
LISTEN_HOST=0.0.0.0
LISTEN_PORT=8000
ALLOWED_HOSTS=localhost,127.0.0.1,signate-server,*.signate.local

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL Configuration (Recommended for production)
POSTGRES_DB=signate_production
POSTGRES_USER=signate
POSTGRES_PASSWORD=secure_password_change_this
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Database URL (PostgreSQL)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# SQLite Configuration (Development only)
# DATABASE_URL=sqlite:////data/signate.db

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Multi-tenant Database Configuration
TENANT_SCHEMAS_ENABLED=true
SHARED_SCHEMA_NAME=shared
TENANT_SCHEMA_PREFIX=tenant_

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================

# Redis Connection
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0

# Redis Memory Management
REDIS_MAX_MEMORY=512mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# Redis Persistence
REDIS_SAVE_ENABLED=true
REDIS_AOF_ENABLED=true

# ==============================================================================
# CELERY CONFIGURATION
# ==============================================================================

# Celery Broker & Result Backend
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/1

# Celery Worker Settings
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_WORKER_PREFETCH_MULTIPLIER=1

# Celery Serialization
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json

# Celery Logging
CELERY_LOG_LEVEL=INFO
CELERY_HIJACK_ROOT_LOGGER=false

# ==============================================================================
# MEDIA & STATIC FILES
# ==============================================================================

# File Storage Paths
MEDIA_ROOT=/data/media
STATIC_ROOT=/data/static
STATIC_URL=/static/
MEDIA_URL=/media/

# File Upload Settings
FILE_UPLOAD_MAX_MEMORY_SIZE=104857600  # 100MB
DATA_UPLOAD_MAX_MEMORY_SIZE=104857600  # 100MB
DATA_UPLOAD_MAX_NUMBER_FIELDS=1000

# Content Storage
CONTENT_STORAGE_PATH=/data/content
CONTENT_MAX_FILE_SIZE=1073741824  # 1GB
CONTENT_ALLOWED_TYPES=image/jpeg,image/png,image/gif,video/mp4,video/webm,text/html

# ==============================================================================
# SECURITY SETTINGS
# ==============================================================================

# Django Security
SECURE_SSL_REDIRECT=false  # Set to true in production with HTTPS
SECURE_HSTS_SECONDS=0      # Set to 31536000 in production
SECURE_HSTS_INCLUDE_SUBDOMAINS=false
SECURE_HSTS_PRELOAD=false
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true

# Session Security
SESSION_COOKIE_SECURE=false  # Set to true in production with HTTPS
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax
SESSION_COOKIE_AGE=1209600   # 2 weeks

# CSRF Security
CSRF_COOKIE_SECURE=false     # Set to true in production with HTTPS
CSRF_COOKIE_HTTPONLY=true
CSRF_COOKIE_SAMESITE=Lax
CSRF_TRUSTED_ORIGINS=https://your-domain.com

# CORS Settings
CORS_ALLOW_ALL_ORIGINS=false  # Set to false in production
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_HEADERS=accept,accept-encoding,authorization,content-type,dnt,origin,user-agent,x-csrftoken,x-requested-with

# ==============================================================================
# AUTHENTICATION & AUTHORIZATION
# ==============================================================================

# JWT Settings
JWT_SECRET_KEY=${SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_LIFETIME=3600      # 1 hour
JWT_REFRESH_TOKEN_LIFETIME=604800   # 1 week

# OAuth Settings (Optional)
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
MICROSOFT_OAUTH_CLIENT_ID=
MICROSOFT_OAUTH_CLIENT_SECRET=

# Multi-tenant Authentication
TENANT_AUTH_ENABLED=true
TENANT_USER_ISOLATION=true

# ==============================================================================
# EMAIL CONFIGURATION
# ==============================================================================

# Email Backend
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# SMTP Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_USE_SSL=false
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password

# Email Settings
DEFAULT_FROM_EMAIL=noreply@signate.local
ADMIN_EMAIL=admin@signate.local
SERVER_EMAIL=${DEFAULT_FROM_EMAIL}

# Development Email (MailHog)
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=mailhog
# EMAIL_PORT=1025
# EMAIL_USE_TLS=false
# EMAIL_USE_SSL=false

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

# Log Levels
LOG_LEVEL=INFO
DJANGO_LOG_LEVEL=INFO
CELERY_LOG_LEVEL=INFO

# Log Format
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# File Logging
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/data/logs/signate.log
LOG_FILE_MAX_SIZE=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=5

# Database Query Logging
LOG_DATABASE_QUERIES=false  # Enable for debugging, disable in production

# ==============================================================================
# MONITORING & PERFORMANCE
# ==============================================================================

# Health Check Settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_CELERY=true

# Performance Monitoring
APM_ENABLED=false
APM_SERVICE_NAME=signate
APM_ENVIRONMENT=${ENVIRONMENT}

# Sentry Configuration (Optional)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==============================================================================
# CACHING CONFIGURATION
# ==============================================================================

# Cache Backend
CACHE_BACKEND=redis
CACHE_LOCATION=redis://${REDIS_HOST}:${REDIS_PORT}/2

# Cache Timeouts
CACHE_DEFAULT_TIMEOUT=300
CACHE_VIEW_TIMEOUT=900
CACHE_TEMPLATE_TIMEOUT=3600

# Session Cache
SESSION_ENGINE=django.contrib.sessions.backends.cache
SESSION_CACHE_ALIAS=default

# ==============================================================================
# DEVELOPMENT SETTINGS
# ==============================================================================

# Development Features
ENABLE_DEBUG_TOOLBAR=false  # Set to true for development
ENABLE_PROFILING=false
ENABLE_SILK=false           # SQL profiling tool

# Hot Reload
ENABLE_HOT_RELOAD=false
WEBPACK_DEV_SERVER=false

# Development Database
DEV_DATABASE_URL=postgresql://signate:signate_dev_password@postgres:5432/signate_dev

# ==============================================================================
# TESTING CONFIGURATION
# ==============================================================================

# Test Database
TEST_DATABASE_URL=postgresql://signate_test:signate_test_password@postgres-test:5432/signate_test

# Test Settings
TESTING=false
TEST_RUNNER=django.test.runner.DiscoverRunner
TEST_PARALLEL=true

# Coverage Settings
COVERAGE_THRESHOLD=80
COVERAGE_FAIL_UNDER=75

# Pytest Configuration
PYTEST_WORKERS=auto
PYTEST_ADDOPTS=--verbose --tb=short --strict-markers

# ==============================================================================
# NETWORK & INFRASTRUCTURE
# ==============================================================================

# Docker Network Subnets
FRONTEND_SUBNET=172.20.0.0/16
BACKEND_SUBNET=172.21.0.0/16

# External Port Mappings
NGINX_PORT=8000
SERVER_DEV_PORT=9000
POSTGRES_PORT=5432
REDIS_PORT=6379

# Container Names
POSTGRES_CONTAINER=signate-postgres
REDIS_CONTAINER=signate-redis
SERVER_CONTAINER=signate-server
NGINX_CONTAINER=signate-nginx

# Build Arguments
DEBIAN_VERSION=bookworm
PYTHON_VERSION=3.11
NODE_VERSION=22
NGINX_VERSION=alpine

# ==============================================================================
# BACKUP & DISASTER RECOVERY
# ==============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/data/backups

# Database Backup
DB_BACKUP_ENABLED=true
DB_BACKUP_COMPRESSION=gzip

# Media Backup
MEDIA_BACKUP_ENABLED=true
MEDIA_BACKUP_EXCLUDE_PATTERNS=*.tmp,*.log,*.cache

# ==============================================================================
# THIRD-PARTY INTEGRATIONS
# ==============================================================================

# Cloud Storage (Optional)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=
AWS_S3_REGION_NAME=us-east-1
AWS_S3_USE_SSL=true

# CDN Configuration
CDN_ENABLED=false
CDN_URL=https://cdn.signate.com

# Analytics
GOOGLE_ANALYTICS_ID=
MATOMO_SITE_ID=
MATOMO_URL=

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================

# Feature Toggles
ENABLE_USER_REGISTRATION=true
ENABLE_MULTI_TENANT=true
ENABLE_API_VERSIONING=true
ENABLE_RATE_LIMITING=true
ENABLE_AUDIT_LOGGING=true

# Experimental Features
ENABLE_REAL_TIME_UPDATES=true
ENABLE_ADVANCED_SCHEDULING=true
ENABLE_CONTENT_ANALYTICS=false

# ==============================================================================
# API CONFIGURATION
# ==============================================================================

# API Settings
API_VERSION=v1
API_PAGINATION_SIZE=20
API_MAX_PAGE_SIZE=100

# Rate Limiting
API_RATE_LIMIT=1000/hour
API_BURST_LIMIT=100/minute

# API Documentation
API_DOCS_ENABLED=true
API_DOCS_URL=/api/docs/

# ==============================================================================
# GIT INFORMATION
# ==============================================================================

# Git Information (automatically populated by CI/CD)
GIT_HASH=unknown
GIT_SHORT_HASH=unknown
GIT_BRANCH=main
GIT_TAG=
BUILD_NUMBER=
BUILD_DATE=

# Device Information
DEVICE_TYPE=server
DEVICE_ID=signate-server-01